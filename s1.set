<configuration-set>
set version 17.2R2.5
set groups re0 system host-name s1
set groups re0 system backup-router 10.102.255.254
set groups re0 interfaces fxp0 unit 0 family inet address 10.102.243.184/20
set groups re1 system host-name s11
set groups re1 system backup-router 10.102.255.254
set groups re1 interfaces fxp0 unit 0 family inet address 10.102.243.185/20
set groups global system domain-name englab.juniper.net
set groups global system domain-search englab.juniper.net
set groups global system domain-search juniper.net
set groups global system domain-search jnpr.net
set groups global system domain-search spglab.juniper.net
set groups global system time-zone America/Los_Angeles
set groups global system debugger-on-break
set groups global system dump-on-panic
set groups global system authentication-order password
set groups global system authentication-order radius
set groups global system root-authentication encrypted-password "$1$ZUlES4dp$OUwWo1g7cLoV/aMWpHUnC/"
set groups global system name-server 10.102.149.51
set groups global system name-server 10.102.149.52
set groups global system radius-server 192.168.69.162 secret "$9$iHfz9Cu0BRQznCApIRSreWxNVw2GjkKM4JGimP"
set groups global system radius-server 192.168.64.10 secret "$9$TQ/t1IcSrKAt0IRheK8X7VYgaZDm5zNdiqmTn6"
set groups global system radius-server 192.168.4.240 secret "$9$GqUqf3nCApOPfQn690ORhSeWL7-boZDylsgoGHk"
set groups global system login class wheel permissions snmp
set groups global system login user regress uid 928
set groups global system login user regress class superuser
set groups global system login user regress shell csh
set groups global system login user regress authentication encrypted-password "$1$kPU..$w.4FGRAGanJ8U4Yq6sbj7."
set groups global system login user remote uid 2000
set groups global system login user remote class super-user
set groups global system services finger
set groups global system services ftp
set groups global system services rlogin
set groups global system services ssh root-login allow
set groups global system services telnet
set groups global system services xnm-clear-text
set groups global system services netconf ssh
set groups global system syslog host log kernel info
set groups global system syslog host log any notice
set groups global system syslog host log pfe info
set groups global system syslog host log interactive-commands any
set groups global system syslog file messages kernel info
set groups global system syslog file messages any notice
set groups global system syslog file messages authorization info
set groups global system syslog file messages pfe info
set groups global system syslog file messages archive world-readable
set groups global system syslog file security interactive-commands any
set groups global system syslog file security archive world-readable
set groups global system processes routing enable
set groups global system processes ntp enable
set groups global system processes management enable
set groups global system processes watchdog enable
set groups global system processes snmp enable
set groups global system processes inet-process enable
set groups global system processes mib-process enable
set groups global system ntp boot-server 172.21.200.60
set groups global system ntp server 172.21.200.60
set groups global system ntp server 172.29.131.60
set groups global system ntp server 172.29.135.60
set groups global chassis dump-on-panic
set groups global snmp location "Systest lab"
set groups global snmp contact "Jay Lloyd"
set groups global snmp interface fxp0.0
set groups global snmp community public authorization read-only
set groups global snmp community private authorization read-write
set groups global routing-options static route 172.16.0.0/12 next-hop 10.102.255.254
set groups global routing-options static route 172.16.0.0/12 retain
set groups global routing-options static route 172.16.0.0/12 no-readvertise
set groups global routing-options static route 192.168.0.0/16 next-hop 10.102.255.254
set groups global routing-options static route 192.168.0.0/16 retain
set groups global routing-options static route 192.168.0.0/16 no-readvertise
set groups global routing-options static route 10.0.0.0/8 next-hop 10.102.255.254
set groups global routing-options static route 10.0.0.0/8 retain
set groups global routing-options static route 10.0.0.0/8 no-readvertise
set groups global routing-options static route 66.129.255.62/32 next-hop 10.102.255.254
set groups global routing-options static route 66.129.255.62/32 retain
set groups global routing-options static route 66.129.255.62/32 no-readvertise
set apply-groups global
set apply-groups re0
set apply-groups re1
set system ports console log-out-on-disconnect
set system services netconf ssh
set chassis fpc 0 pic 0 tunnel-services bandwidth 1g
set interfaces ge-0/0/0 unit 0 family inet address 172.30.1.0/31
set interfaces gr-0/0/10 unit 2 tunnel source 1.1.1.1
set interfaces gr-0/0/10 unit 2 tunnel destination 1.1.1.2
set interfaces gr-0/0/10 unit 2 family inet address 100.64.12.0/31
set interfaces gr-0/0/10 unit 2 family mpls
set interfaces gr-0/0/10 unit 3 tunnel source 1.1.1.1
set interfaces gr-0/0/10 unit 3 tunnel destination 1.1.1.3
set interfaces gr-0/0/10 unit 3 family inet address 100.64.13.0/31
set interfaces gr-0/0/10 unit 3 family mpls
set interfaces gr-0/0/10 unit 4 tunnel source 1.1.1.1
set interfaces gr-0/0/10 unit 4 tunnel destination 1.1.1.4
set interfaces gr-0/0/10 unit 4 family inet address 100.64.14.0/31
set interfaces gr-0/0/10 unit 4 family mpls
set interfaces gr-0/0/10 unit 10 tunnel source 1.1.1.1
set interfaces gr-0/0/10 unit 10 tunnel destination 1.1.1.10
set interfaces gr-0/0/10 unit 10 family inet address 100.64.101.0/31
set interfaces gr-0/0/10 unit 10 family mpls
set interfaces lo0 unit 0 family inet address 1.1.1.1/32
set interfaces lo0 unit 1 family inet address 192.168.1.1/32
set interfaces lo0 unit 2 family inet address 192.168.2.1/32
set interfaces lo0 unit 3 family inet address 192.168.3.1/32
set interfaces lo0 unit 4 family inet address 192.168.4.1/32
set routing-options rib inet.3 static route 1.1.1.2/32 next-hop gr-0/0/10.2
set routing-options rib inet.3 static route 1.1.1.3/32 next-hop gr-0/0/10.3
set routing-options rib inet.3 static route 1.1.1.4/32 next-hop gr-0/0/10.4
set routing-options rib inet.3 static route 1.1.1.10/32 next-hop gr-0/0/10.10
set routing-options autonomous-system 100
set protocols mpls interface gr-0/0/10.2
set protocols mpls interface gr-0/0/10.3
set protocols mpls interface gr-0/0/10.4
set protocols mpls interface gr-0/0/10.10
set protocols bgp group rr type internal
set protocols bgp group rr local-address 1.1.1.1
set protocols bgp group rr import nhc
set protocols bgp group rr family inet-vpn unicast
set protocols bgp group rr neighbor 10.10.10.10
set protocols ospf area 0.0.0.0 interface ge-0/0/0.0 interface-type p2p
set protocols ospf area 0.0.0.0 interface lo0.0 passive
set policy-options policy-statement byod-exp term ok from protocol direct
set policy-options policy-statement byod-exp term ok from route-filter 192.168.0.0/16 orlonger
set policy-options policy-statement byod-exp term ok then community add byod-vpn
set policy-options policy-statement byod-exp term ok then accept
set policy-options policy-statement byod-exp term ko then reject
set policy-options policy-statement byod-imp term ok from protocol bgp
set policy-options policy-statement byod-imp term ok from community byod-vpn
set policy-options policy-statement byod-imp term ok from route-filter 0.0.0.0/0 exact
set policy-options policy-statement byod-imp term ok then accept
set policy-options policy-statement byod-imp term ko then reject
set policy-options policy-statement central-exp term ok from protocol direct
set policy-options policy-statement central-exp term ok from route-filter 192.168.0.0/16 orlonger
set policy-options policy-statement central-exp term ok then community add central-vpn
set policy-options policy-statement central-exp term ok then community add central-spoke
set policy-options policy-statement central-exp term ok then accept
set policy-options policy-statement central-exp term ko then reject
set policy-options policy-statement central-imp term rem-spoke from protocol bgp
set policy-options policy-statement central-imp term rem-spoke from community central-spoke
set policy-options policy-statement central-imp term rem-spoke then reject
deactivate policy-options policy-statement central-imp term rem-spoke
set policy-options policy-statement central-imp term ok from protocol bgp
set policy-options policy-statement central-imp term ok from community central-vpn
set policy-options policy-statement central-imp term ok then accept
set policy-options policy-statement central-imp term ko then reject
set policy-options policy-statement full-exp term ok from protocol direct
set policy-options policy-statement full-exp term ok from route-filter 192.168.0.0/16 orlonger
set policy-options policy-statement full-exp term ok then community add full-vpn
set policy-options policy-statement full-exp term ok then accept
set policy-options policy-statement full-exp term ko then reject
set policy-options policy-statement full-imp term ok from protocol bgp
set policy-options policy-statement full-imp term ok from community full-vpn
set policy-options policy-statement full-imp term ok then accept
set policy-options policy-statement full-imp term ko then reject
set policy-options policy-statement hq-exp term ok from protocol direct
set policy-options policy-statement hq-exp term ok from route-filter 192.168.0.0/16 orlonger
set policy-options policy-statement hq-exp term ok then community add hq-vpn
set policy-options policy-statement hq-exp term ok then accept
set policy-options policy-statement hq-exp term ko then reject
set policy-options policy-statement hq-imp term ok from protocol bgp
set policy-options policy-statement hq-imp term ok from community hq-hub
set policy-options policy-statement hq-imp term ok then accept
set policy-options policy-statement hq-imp term ko then reject
set policy-options policy-statement nhc term central-spoke from community central-spoke
set policy-options policy-statement nhc term central-spoke then next-hop 1.1.1.10
set policy-options policy-statement nhc term central-spoke then accept
set policy-options community byod-vpn members target:400:4
set policy-options community central-spoke members 200:2
set policy-options community central-vpn members target:200:2
set policy-options community full-vpn members target:100:1
set policy-options community hq-hub members 300:3
set policy-options community hq-hub members target:300:3
set policy-options community hq-vpn members target:300:3
set routing-instances byod instance-type vrf
set routing-instances byod interface lo0.4
set routing-instances byod route-distinguisher 1.1.1.1:4
set routing-instances byod vrf-import byod-imp
set routing-instances byod vrf-export byod-exp
set routing-instances byod vrf-table-label
set routing-instances central instance-type vrf
set routing-instances central interface lo0.2
set routing-instances central route-distinguisher 1.1.1.1:2
set routing-instances central vrf-import central-imp
set routing-instances central vrf-export central-exp
set routing-instances central vrf-table-label
set routing-instances full instance-type vrf
set routing-instances full interface lo0.1
set routing-instances full route-distinguisher 1.1.1.1:1
set routing-instances full vrf-import full-imp
set routing-instances full vrf-export full-exp
set routing-instances full vrf-table-label
set routing-instances hq instance-type vrf
set routing-instances hq interface lo0.3
set routing-instances hq route-distinguisher 1.1.1.1:3
set routing-instances hq vrf-import hq-imp
set routing-instances hq vrf-export hq-exp
set routing-instances hq vrf-table-label
</configuration-set>